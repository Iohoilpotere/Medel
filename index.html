<!DOCTYPE html>
<html lang="it">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Medel – Editor Step (Prototype v2.6.1, modular)</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    :root {
      --canvas-bg: #0b0c10;
      --grid-color: rgba(255, 255, 255, .12);
      --grid-color-sub: rgba(255, 255, 255, .06);
      --sel: #0d6efd;
      --handle: #fff;
      --handle-size: 10px;
      --panel-gap: 8px;
      --thumb-bg: #13151a;
      --thumb-border: rgba(255, 255, 255, .14);
      --thumb-h: 76px;
      --collapsed-h: 48px;
      --prop-label-col-w: 120px;
    }

    html,
    body {
      height: 100%;
      background: var(--bg);
      color: var(--fg);
    }

    body {
      background: #0e0f13;
      color: #e9ecef;
    }

    .left-col {
      display: flex;
      flex-direction: column;
      gap: var(--panel-gap);
      height: 100%;
    }

    .left-col>.dock-panel {
      flex: 1 1 auto;
      min-height: 0;
    }

    .left-col>.dock-panel[data-collapsed="1"] {
      flex: 0 0 var(--collapsed-h);
    }

    .dock-panel {
      position: relative;
      display: flex;
      flex-direction: column;
      --panel-expanded-w: 260px;
      --panel-collapsed-w: 44px;
      width: var(--panel-expanded-w);
      transition: width .2s ease;
      background: var(--panel-bg);
      border: 1px solid var(--panel-border);
      border-radius: .5rem;
      overflow: visible;
    }


    .sidebar {
      --panel-expanded-w: 260px;
    }

    .propbar {
      --panel-expanded-w: 320px;
    }

    /* Stato collassato: niente larghezza, si vede solo l'handle */
    .dock-panel[data-collapsed="1"] {
      width: 0 !important;
      /* elimina la “fascia grigia” */
      min-width: 0;
      background: transparent;
      border-color: transparent;
      box-shadow: none;
      overflow: visible;
      /* l’handle può “sporgere” */
      pointer-events: none;
      /* il pannello non blocca i click sullo stage */
    }

    /* Il corpo resta nascosto (già c’era, lo rendiamo esplicito) */
    .dock-panel[data-collapsed="1"] .panel-body {
      display: none;
    }

    /* L’handle resta cliccabile anche se il pannello è non-interattivo */
    .dock-panel[data-collapsed="1"] .panel-handle {
      pointer-events: auto;
      z-index: 20;
    }


    .dock-panel .panel-body {
      flex: 1;
      overflow: auto;
    }

    .dock-panel[data-collapsed="1"] .panel-body {
      display: none;
    }

    .dock-panel .panel-handle {
      position: absolute;
      top: 50%;
      transform: translate(0, -50%);
      padding: .15rem .35rem;
      background: var(--panel-handle-bg);
      color: var(--panel-handle-fg);
      border: 1px solid var(--panel-handle-border);
      z-index: 10;
      cursor: pointer;
      border-radius: .375rem;
      opacity: .9;
    }

    .dock-panel[data-side="left"] .panel-handle {
      right: -1px;
      transform: translate(100%, -50%);
      border-top-left-radius: 0;
      border-bottom-left-radius: 0;
    }

    .dock-panel[data-side="right"] .panel-handle {
      left: -1px;
      transform: translate(-100%, -50%);
      border-top-right-radius: 0;
      border-bottom-right-radius: 0;
    }

    .dock-panel[data-side="left"][data-collapsed="0"] .panel-handle {
      right: -1px;
      transform: translate(100%, -50%);
    }

    .dock-panel[data-side="right"][data-collapsed="0"] .panel-handle {
      left: -1px;
      transform: translate(-100%, -50%);
    }

    /* Maniglia di resize laterale (solo orizzontale) */
    .dock-panel .resize-handle {
      position: absolute;
      top: 0;
      bottom: 0;
      width: 6px;
      cursor: ew-resize;
      z-index: 15;
      opacity: .3;
    }

    .dock-panel[data-side="left"] .resize-handle {
      right: -3px;
    }

    .dock-panel[data-side="right"] .resize-handle {
      left: -3px;
    }

    .dock-panel[data-collapsed="1"] .resize-handle {
      display: none;
    }

    /* optional: feedback hover */
    .dock-panel .resize-handle:hover {
      background: rgba(255, 255, 255, .1);
    }

    .dock-panel .panel-handle .label {
      writing-mode: vertical-rl;
      text-orientation: mixed;
      letter-spacing: .02em;
      font-size: .7rem;
      line-height: 1;
    }

    .toolbar {
      gap: .5rem
    }

    .stage-wrap {
      flex: 1;
      min-width: 0;
    }

    .stage-outer {
      position: relative;
      width: 100%;
      height: 100%;
      display: grid;
      /* ✅ centra quando più piccolo */
      place-items: center;
      overflow: auto;
      /* ✅ scrollbar orizzontale + verticale */
    }

    .stage {
      position: relative;
      background: var(--canvas-bg);
      border-radius: 10px;
      box-shadow: 0 0 0 1px rgba(255, 255, 255, .08) inset, 0 12px 30px rgba(0, 0, 0, .35);
      overflow: hidden;
      width: auto;
      height: auto;
      --zoom: 1;
    }

    .stage[data-orient="landscape"] {
      aspect-ratio: 16/9;
    }

    .stage[data-orient="portrait"] {
      aspect-ratio: 9/16;
    }

    .stage .stage-size {
      /* trucco: il contenuto ha size "logica" base (100%/zoom), poi lo scaliamo */
      width: calc(100% / var(--zoom));
      height: calc(100% / var(--zoom));
      transform: scale(var(--zoom));
      transform-origin: 0 0;
      /* scala dall'angolo in alto a sinistra */
    }

    .stage[data-grid="on"] .stage-size::before {
      content: "";
      position: absolute;
      inset: 0;
      pointer-events: none;
      background-image: linear-gradient(var(--grid-color) 1px, transparent 1px), linear-gradient(90deg, var(--grid-color) 1px, transparent 1px);
      background-size: var(--grid) var(--grid), var(--grid) var(--grid);
    }

    .stage[data-grid="on"][data-subgrid="on"] .stage-size::after {
      content: "";
      position: absolute;
      inset: 0;
      pointer-events: none;
      background-image: linear-gradient(var(--grid-color-sub) 1px, transparent 1px), linear-gradient(90deg, var(--grid-color-sub) 1px, transparent 1px);
      background-size: calc(var(--grid)/2) calc(var(--grid)/2), calc(var(--grid)/2) calc(var(--grid)/2);
    }

    #stepCanvas {
      position: absolute;
      inset: 0;
    }

    .el {
      position: absolute;
      user-select: none;
    }

    .el.selected {
      outline: 2px solid var(--sel);
    }

    .marquee {
      position: absolute;
      border: 1px dashed rgba(13, 110, 253, .7);
      background: rgba(13, 110, 253, .1);
      pointer-events: none;
    }

    .handles {
      position: absolute;
      inset: 0;
      pointer-events: none;
    }

    .handle {
      position: absolute;
      width: var(--handle-size);
      height: var(--handle-size);
      background: var(--handle);
      border: 2px solid var(--sel);
      border-radius: 3px;
      box-shadow: 0 1px 2px rgba(0, 0, 0, .4);
      pointer-events: auto;
    }

    .handle.nw {
      top: -6px;
      left: -6px;
      cursor: nwse-resize;
    }

    .handle.n {
      top: -6px;
      left: calc(50% - 6px);
      cursor: ns-resize;
    }

    .handle.ne {
      top: -6px;
      right: -6px;
      cursor: nesw-resize;
    }

    .handle.e {
      top: calc(50% - 6px);
      right: -6px;
      cursor: ew-resize;
    }

    .handle.se {
      bottom: -6px;
      right: -6px;
      cursor: nwse-resize;
    }

    .handle.s {
      bottom: -6px;
      left: calc(50% - 6px);
      cursor: ns-resize;
    }

    .handle.sw {
      bottom: -6px;
      left: -6px;
      cursor: nesw-resize;
    }

    .handle.w {
      top: calc(50% - 6px);
      left: -6px;
      cursor: ew-resize;
    }

    .palette-item {
      cursor: grab;
    }

    .palette-item:active {
      cursor: grabbing;
    }

    .code {
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
    }

    .steps-toolbar {
      display: flex;
      align-items: center;
      gap: .5rem;
    }

    .steps-toolbar .btn {
      padding: .15rem .4rem;
    }

    .cat {
      border-top: 1px dashed rgba(255, 255, 255, .15);
      padding-top: .5rem;
      margin-top: .5rem;
    }

    .cat:first-child {
      border-top: none;
      padding-top: 0;
      margin-top: 0;
    }

    .cat-head {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: .5rem;
    }

    .cat-title {
      font-weight: 600;
      font-size: .9rem;
    }

    .cat-actions .btn {
      padding: .1rem .35rem;
    }

    .cat-body {
      margin-top: .35rem;
    }

    .thumbs {
      display: grid;
      grid-template-columns: 1fr;
      gap: .5rem;
    }

    .thumb {
      position: relative;
      background: var(--thumb-bg);
      border: 1px solid var(--thumb-border);
      border-radius: .4rem;
      overflow: hidden;
      cursor: pointer;
    }

    .thumb .mini {
      position: relative;
      height: var(--thumb-h);
      width: calc(var(--thumb-h) * 16 / 9);
      background: #0b0c10;
      margin: 0 auto;
    }

    .thumb[data-orient="portrait"] .mini {
      width: calc(var(--thumb-h) * 9 / 16);
      height: var(--thumb-h);
    }

    .thumb .mini .mini-canvas {
      position: absolute;
      inset: 0;
    }

    .thumb .label {
      font-size: .75rem;
      padding: .35rem .5rem;
      color: var(--fg-muted);
      border-top: 1px solid var(--thumb-border);
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: .5rem;
    }

    .thumb .label .title {
      display: flex;
      align-items: center;
      gap: .4rem;
    }

    .thumb .label .title .badge {
      font-weight: 600;
    }

    .thumb .actions {
      display: flex;
      gap: .3rem;
    }

    .thumb .actions .btn-icon {
      border: 1px solid var(--thumb-border);
      background: transparent;
      color: var(--fg-muted);
      padding: .15rem .3rem;
      border-radius: .35rem;
      line-height: 1;
    }

    .thumb .actions .btn-icon:hover {
      background: rgba(255, 255, 255, .06);
    }

    .thumb.active {
      outline: 2px solid var(--sel);
    }

    .thumb.add .mini {
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .thumb.add .mini::after {
      content: "+";
      font-size: 1.4rem;
      color: #8ea9ff;
    }

    .rename-input {
      background: transparent;
      border: 1px dashed rgba(255, 255, 255, .25);
      color: #fff;
      border-radius: .25rem;
      font-size: .85rem;
      padding: .1rem .25rem;
      width: 100%;
    }


    .prop-row .form-label.small {
      margin: 0;
    }

    /* colonna etichette un filo più compatta ma stabile */
    .prop-row>label {
      flex: 0 0 130px;
      /* era ~150px, l’hai già ridotta: mantieni coerente qui */
    }

    /* ===== THEME OVERRIDES (globali) ===== */
    :root {
      /* opzionale: fallback se i temi non sono ancora applicati */
      --bg: #0e0f13;
      --fg: #e9ecef;
      --fg-muted: #cbd3da;

      --panel-bg: #21252b;
      --panel-border: rgba(255, 255, 255, .12);
      --panel-handle-bg: #1c1f24;
      --panel-handle-fg: #e9ecef;
      --panel-handle-border: rgba(255, 255, 255, .15);

      --thumb-bg: #13151a;
      --thumb-border: rgba(255, 255, 255, .14);
    }

    /* body + testo principale */
    html,
    body {
      background: var(--bg);
      color: var(--fg);
    }

    /* pannelli laterali */
    .dock-panel {
      background: var(--panel-bg);
      border-color: var(--panel-border);
    }

    .dock-panel[data-collapsed="1"] {
      background: transparent;
      border-color: transparent;
    }

    /* maniglia di collasso pannelli */
    .dock-panel .panel-handle {
      background: var(--panel-handle-bg);
      color: var(--panel-handle-fg);
      border-color: var(--panel-handle-border);
    }

    /* override utili di Bootstrap usati nella UI */
    .bg-dark-subtle {
      background-color: var(--panel-bg) !important;
    }

    .border-secondary-subtle {
      border-color: var(--panel-border) !important;
    }

    .text-secondary {
      color: var(--fg-muted) !important;
    }

    /* canvas/stage già usa --canvas-bg nelle tue regole */

    /* ottimizzazioni interazione: niente lerp/transition sul ridimensionamento */
    .el,
    .handle {
      transition: none !important;
      will-change: left, top, width, height;
    }

    /* proprietà inline (layout) – usate da elementi E dallo step */

    .prop-section {
      border-top: 1px dashed var(--panel-border);
      padding-top: .5rem;
      margin-top: .5rem;
    }

    .prop-section:first-child {
      border-top: none;
      padding-top: 0;
      margin-top: 0;
    }

    .prop-head {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: .5rem;
      cursor: pointer;
      user-select: none;
    }

    .prop-head .title {
      font-weight: 600;
      font-size: .9rem;
    }

    .prop-body {
      margin-top: .5rem;
    }

    .prop-section[data-collapsed="1"] .prop-body {
      display: none;
    }

    .prop-row {
      display: flex;
      align-items: center;
      gap: .5rem;
      margin-bottom: .5rem;
    }

    .prop-row>label {
      flex: 0 0 var(--prop-label-col-w);
      margin: 0;
    }

    .prop-inline {
      display: flex;
      align-items: center;
      gap: .5rem;
      flex: 1;
    }

    .prop-inline>* {
      min-width: 0;
    }

    .prop-inline .small-label {
      font-size: .8rem;
      opacity: .8;
    }

    .prop-two {
      display: flex;
      gap: .5rem;
      align-items: center;
    }

    .prop-two .w-70 {
      width: 70%;
    }

    .prop-two .w-30 {
      width: 30%;
    }

    .prop-group {
      display: flex;
      gap: .5rem;
      align-items: center;
      flex-wrap: nowrap;
    }

    .range-wrap {
      display: flex;
      align-items: center;
      gap: .5rem;
    }

    .range-wrap .small-label {
      min-width: 2ch;
      text-align: right;
    }

    .prop-group .mini {
      display: flex;
      align-items: center;
      gap: .35rem;
    }

    .prop-group .mini label {
      width: auto;
      flex: 0 0 auto;
      font-size: .8rem;
      opacity: .8;
    }

    /* tutte le "mini label" (freccine, 'px', ecc.) con larghezza fissa centrata */
    .prop-group .mini .small-label.icon {
      display: inline-block;
      width: 1.6rem;
      /* stessa larghezza per ↔, ↕, ↑, ↓, →, ←, 'px' */
      text-align: center;
    }

    .prop-group .mini input[type="number"] {
      max-width: 110px;
      /* allarga un filo i campi numerici */
    }

    /* dropdown unità (vw/px/%) leggibile anche quando affiancato al numero */
    .prop-group .mini select {
      min-width: 70px;
    }

    .color-alpha {
      display: flex;
      align-items: center;
      gap: .5rem;
    }

    /* alpha solo 3 caratteri + separatore */
    .color-alpha input[type="number"] {
      width: 56px;
      /* ~3–4 cifre “strettissime” */
      padding-right: .25rem;
    }


    .prop-row>.prop-input {
      flex: 1 1 auto;
      min-width: 0;
    }

    /* ===== Theme-aware buttons (outline) ===== */
    .btn-outline-light,
    .btn.btn-outline-light,
    .btn-outline-secondary,
    .btn.btn-outline-secondary,
    .toolbar .btn {
      color: var(--btn-outline-fg) !important;
      border-color: var(--btn-outline-border) !important;
      background: transparent;
    }

    .btn-outline-light:hover,
    .btn.btn-outline-light:hover,
    .btn-outline-secondary:hover,
    .btn.btn-outline-secondary:hover,
    .toolbar .btn:hover {
      color: var(--btn-outline-hover-fg) !important;
      background: var(--btn-outline-hover-bg) !important;
      border-color: var(--btn-outline-hover-border) !important;
    }

    /* badge nei thumbs / step list */
    .badge.text-bg-secondary {
      background-color: var(--badge-bg) !important;
      color: var(--badge-fg) !important;
    }

    /* ===== Palette (pannello "Elementi") leggibile anche in chiaro ===== */
    .sidebar .palette-item.btn-outline-light {
      color: var(--btn-outline-fg) !important;
      border-color: var(--btn-outline-border) !important;
      background: transparent;
    }

    .sidebar .palette-item.btn-outline-light:hover {
      color: var(--btn-outline-hover-fg) !important;
      background: var(--btn-outline-hover-bg) !important;
      border-color: var(--btn-outline-hover-border) !important;
    }

    .sidebar .palette-item .small {
      color: var(--fg-muted) !important;
    }

    /* ===== Thumbs (bordi, label) adattati al tema ===== */
    .thumb {
      background: var(--thumb-bg);
      border-color: var(--thumb-border);
    }

    .thumb .label {
      color: var(--fg-muted);
      border-top-color: var(--thumb-border);
    }

    .thumb .mini {
      background: var(--canvas-bg);
    }

    /* ===== Step/Prop panel headings ===== */
    .cat-title,
    .text-secondary {
      color: var(--fg-muted) !important;
    }

    /* ===== Inputs e bordi coerenti con il tema ===== */
    .form-control,
    .form-select,
    .input-group-text {
      color: var(--fg);
      background-color: var(--panel-bg);
      border-color: var(--panel-border);
    }

    .form-control:focus,
    .form-select:focus {
      border-color: var(--btn-outline-border);
      box-shadow: 0 0 0 .2rem color-mix(in srgb, var(--btn-outline-border) 35%, transparent);
    }

    /* Outline tematizzati (normale/hover) */
    .toolbar .btn-outline-light,
    .dock-panel .btn-outline-light {
      color: var(--btn-outline-fg) !important;
      border-color: var(--btn-outline-border) !important;
      background-color: transparent !important;
    }

    .toolbar .btn-outline-light:hover,
    .toolbar .btn-outline-light:focus {
      color: var(--btn-outline-hover-fg) !important;
      background-color: var(--btn-outline-hover-bg) !important;
      border-color: var(--btn-outline-hover-border) !important;
    }

    /* ✅ Stato attivo/checked dei radio (16:9 / 9:16) */
    .btn-check:checked+.btn-outline-light,
    .toolbar .btn-outline-light.active,
    .toolbar .btn-outline-light:active {
      color: var(--btn-outline-active-fg, #fff) !important;
      background-color: var(--btn-outline-active-bg, var(--sel)) !important;
      border-color: var(--btn-outline-active-border, var(--sel)) !important;
    }

    /* (opzionale) stato disabled per coerenza */
    .toolbar .btn-outline-light.disabled,
    .toolbar .btn-outline-light:disabled {
      color: color-mix(in srgb, var(--btn-outline-fg) 50%, transparent) !important;
      border-color: color-mix(in srgb, var(--btn-outline-border) 60%, transparent) !important;
    }

    .el-label .content {
      display: flex;
      width: 100%;
      height: 100%;
    }

    /* Allinea la riga "Colore" al bordo destro come gli altri campi */
    .prop-inline>.color-alpha {
      flex: 1 1 auto;
      min-width: 0;
      max-width: 100%;
      box-sizing: border-box;
    }

    .color-alpha .form-control-color {
      flex: 0 0 20px;
      width: 20px;
      margin: 0;
      box-sizing: border-box;
    }

    .color-alpha .hex-input,
    .color-alpha input[type="text"] {
      flex: 1 1 140px;
      /* prevale, così “si legge” bene */
      min-width: 0;
    }

    .color-alpha .prop-two {
      flex: 0 0 54px;
      max-width: 54px;
      box-sizing: border-box;
    }

    /* Evita micro-sforamenti quando lo zoom produce subpixel */
    .prop-row {
      overflow: hidden;
      /* taglia 1px “fantasma” dovuto ai rounding */
    }

    /* (opzionale) ripulisce il padding interno del color-swatch su WebKit */
    .form-control-color::-webkit-color-swatch-wrapper {
      padding: 0;
    }

    .form-control-color::-webkit-color-swatch {
      border: none;
    }
  </style>
</head>

<body>
  <div class="d-flex" style="height:100vh; overflow:hidden;">
    <div class="left-col me-2">
      <aside class="sidebar dock-panel border-secondary-subtle bg-dark-subtle" data-side="left" data-title="Elementi"
        data-collapsed="0">
        <div class="panel-body p-3">
          <h6 class="text-uppercase text-secondary">Elementi</h6>
          <div id="palette" class="vstack gap-2"></div>
          <hr>
          <div class="small text-secondary">Trascina un elemento nello step.
            <div class="mt-2"><span class="badge text-bg-secondary">DEL</span> elimina, <span
                class="badge text-bg-secondary">←↑→↓</span> sposta (<span class="badge text-bg-secondary">Shift</span> =
              snap a griglia). <span class="badge text-bg-secondary">Ctrl+Z</span> annulla. Ctrl/Shift-click per
              multi-selezione.</div>
          </div>
        </div>
      </aside>

      <aside id="stepsPanel" class="dock-panel border-secondary-subtle bg-dark-subtle" data-side="left"
        data-title="Step" data-collapsed="1">
        <div class="panel-body p-3">
          <div class="steps-toolbar mb-2">
            <button id="btnAddCat" class="btn btn-outline-light btn-sm" type="button" title="Nuova categoria">+
              Categoria</button>
          </div>
          <div id="stepsCats" class="vstack gap-2"></div>
        </div>
      </aside>
    </div>

    <main class="stage-wrap d-flex flex-column">
      <div
        class="toolbar d-flex align-items-center px-3 py-2 border-bottom border-secondary-subtle bg-dark-subtle flex-wrap">
        <div class="btn-group me-2" role="group" aria-label="Orientamento">
          <input type="radio" class="btn-check" name="orient" id="orientLandscape" autocomplete="off" checked>
          <label class="btn btn-outline-light btn-sm" for="orientLandscape">16:9</label>
          <input type="radio" class="btn-check" name="orient" id="orientPortrait" autocomplete="off">
          <label class="btn btn-outline-light btn-sm" for="orientPortrait">9:16</label>
        </div>
        <div class="d-flex align-items-center me-3" style="min-width:280px;">
          <label for="gridRange" class="form-label me-2 mb-0 small">Snap/Grid</label>
          <input type="range" class="form-range" id="gridRange" min="0" max="64" step="2" value="16"
            style="width:180px">
          <span id="gridVal" class="ms-2 small code">16px</span>
          <div class="form-check form-switch ms-3">
            <input class="form-check-input" type="checkbox" role="switch" id="subgridSwitch">
            <label class="form-check-label small" for="subgridSwitch">Griglia fine</label>
          </div>
        </div>
        <div class="btn-group btn-group-sm me-2" role="group" aria-label="Align">
          <button type="button" class="btn btn-outline-light" data-cmd="align-left" title="Allinea sinistra">⟸</button>
          <button type="button" class="btn btn-outline-light" data-cmd="align-hcenter"
            title="Allinea centro orizz.">╎</button>
          <button type="button" class="btn btn-outline-light" data-cmd="align-right" title="Allinea destra">⟹</button>
          <button type="button" class="btn btn-outline-light" data-cmd="align-top" title="Allinea alto">⟰</button>
          <button type="button" class="btn btn-outline-light" data-cmd="align-vcenter"
            title="Allinea centro vert.">━</button>
          <button type="button" class="btn btn-outline-light" data-cmd="align-bottom" title="Allinea basso">⟱</button>
          <button type="button" class="btn btn-outline-light" data-cmd="dist-h" title="Distribuisci orizz.">⇤ ⇥</button>
          <button type="button" class="btn btn-outline-light" data-cmd="dist-v" title="Distribuisci vert.">⇑ ⇓</button>
        </div>
        <div class="btn-group btn-group-sm me-2" role="group" aria-label="Layers">
          <button type="button" class="btn btn-outline-light" data-cmd="front" title="Porta in cima">↑</button>
          <button type="button" class="btn btn-outline-light" data-cmd="back" title="Porta indietro">↓</button>
        </div>
        <div class="input-group input-group-sm me-2" style="width: 300px;">
          <span class="input-group-text">Sfondo</span>
          <input id="bgUrl" type="url" class="form-control" placeholder="https://…/img.jpg">
          <button id="setBg" class="btn btn-outline-light" type="button">Imposta</button>
        </div>
        <button id="btnExportHtml" class="btn btn-primary btn-sm" type="button">Esporta HTML</button>
      </div>

      <div class="stage-outer p-3">
        <div id="stage" class="stage" data-orient="landscape" data-grid="on" data-subgrid="off" style="--grid:16px;">
          <div class="stage-size">
            <div id="stepCanvas"></div>
            <div id="marquee" class="marquee d-none"></div>
          </div>
        </div>
      </div>
    </main>

    <aside class="propbar dock-panel border-secondary-subtle bg-dark-subtle" data-side="right" data-title="Proprietà">
      <div class="panel-body p-3">
        <h6 class="text-uppercase text-secondary">Proprietà</h6>
        <form id="propForm" class="vstack gap-2">
          <div class="text-secondary small">Nessun elemento selezionato</div>
        </form>
      </div>
    </aside>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script type="module" src="./src/main.js"></script>
</body>

</html>